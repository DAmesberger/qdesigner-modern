/* QDesigner Modern RTL Support */
/* Comprehensive RTL styles and layout adjustments */

/* === Base RTL Support === */
[dir="rtl"] {
  text-align: right;
}

[dir="rtl"] body {
  font-family: 'Segoe UI', Tahoma, Arial, Helvetica, sans-serif;
}

/* Arabic and Hebrew specific fonts */
[dir="rtl"][lang="ar"] {
  font-family: 'Segoe UI', 'Arial Unicode MS', Tahoma, Arial, sans-serif;
}

[dir="rtl"][lang="he"] {
  font-family: 'Segoe UI', 'Arial Hebrew', 'David', Tahoma, Arial, sans-serif;
}

/* === Layout Adjustments === */

/* Flexbox RTL adjustments */
[dir="rtl"] .flex {
  flex-direction: row-reverse;
}

[dir="rtl"] .flex-row {
  flex-direction: row-reverse;
}

[dir="rtl"] .flex-row-reverse {
  flex-direction: row;
}

/* Grid RTL adjustments */
[dir="rtl"] .grid {
  direction: rtl;
}

/* Float adjustments */
[dir="rtl"] .float-left {
  float: right;
}

[dir="rtl"] .float-right {
  float: left;
}

/* === Margin and Padding RTL === */

/* Left/Right margin swaps */
[dir="rtl"] .ml-1 { margin-left: 0; margin-right: 0.25rem; }
[dir="rtl"] .ml-2 { margin-left: 0; margin-right: 0.5rem; }
[dir="rtl"] .ml-3 { margin-left: 0; margin-right: 0.75rem; }
[dir="rtl"] .ml-4 { margin-left: 0; margin-right: 1rem; }
[dir="rtl"] .ml-5 { margin-left: 0; margin-right: 1.25rem; }
[dir="rtl"] .ml-6 { margin-left: 0; margin-right: 1.5rem; }
[dir="rtl"] .ml-8 { margin-left: 0; margin-right: 2rem; }

[dir="rtl"] .mr-1 { margin-right: 0; margin-left: 0.25rem; }
[dir="rtl"] .mr-2 { margin-right: 0; margin-left: 0.5rem; }
[dir="rtl"] .mr-3 { margin-right: 0; margin-left: 0.75rem; }
[dir="rtl"] .mr-4 { margin-right: 0; margin-left: 1rem; }
[dir="rtl"] .mr-5 { margin-right: 0; margin-left: 1.25rem; }
[dir="rtl"] .mr-6 { margin-right: 0; margin-left: 1.5rem; }
[dir="rtl"] .mr-8 { margin-right: 0; margin-left: 2rem; }

/* Left/Right padding swaps */
[dir="rtl"] .pl-1 { padding-left: 0; padding-right: 0.25rem; }
[dir="rtl"] .pl-2 { padding-left: 0; padding-right: 0.5rem; }
[dir="rtl"] .pl-3 { padding-left: 0; padding-right: 0.75rem; }
[dir="rtl"] .pl-4 { padding-left: 0; padding-right: 1rem; }
[dir="rtl"] .pl-5 { padding-left: 0; padding-right: 1.25rem; }
[dir="rtl"] .pl-6 { padding-left: 0; padding-right: 1.5rem; }
[dir="rtl"] .pl-8 { padding-left: 0; padding-right: 2rem; }

[dir="rtl"] .pr-1 { padding-right: 0; padding-left: 0.25rem; }
[dir="rtl"] .pr-2 { padding-right: 0; padding-left: 0.5rem; }
[dir="rtl"] .pr-3 { padding-right: 0; padding-left: 0.75rem; }
[dir="rtl"] .pr-4 { padding-right: 0; padding-left: 1rem; }
[dir="rtl"] .pr-5 { padding-right: 0; padding-left: 1.25rem; }
[dir="rtl"] .pr-6 { padding-right: 0; padding-left: 1.5rem; }
[dir="rtl"] .pr-8 { padding-right: 0; padding-left: 2rem; }

/* === Border Radius RTL === */
[dir="rtl"] .rounded-l-none { border-radius: 0; border-top-right-radius: 0; border-bottom-right-radius: 0; }
[dir="rtl"] .rounded-r-none { border-radius: 0; border-top-left-radius: 0; border-bottom-left-radius: 0; }

[dir="rtl"] .rounded-l { border-radius: 0; border-top-right-radius: 0.25rem; border-bottom-right-radius: 0.25rem; }
[dir="rtl"] .rounded-r { border-radius: 0; border-top-left-radius: 0.25rem; border-bottom-left-radius: 0.25rem; }

[dir="rtl"] .rounded-tl { border-top-left-radius: 0; border-top-right-radius: 0.25rem; }
[dir="rtl"] .rounded-tr { border-top-right-radius: 0; border-top-left-radius: 0.25rem; }
[dir="rtl"] .rounded-bl { border-bottom-left-radius: 0; border-bottom-right-radius: 0.25rem; }
[dir="rtl"] .rounded-br { border-bottom-right-radius: 0; border-bottom-left-radius: 0.25rem; }

/* === Text Alignment === */
[dir="rtl"] .text-left { text-align: right; }
[dir="rtl"] .text-right { text-align: left; }

/* === Transform RTL === */
[dir="rtl"] .transform.scale-x-[-1] { transform: scaleX(1); }

/* Rotate adjustments for RTL */
[dir="rtl"] .rotate-90 { transform: rotate(-90deg); }
[dir="rtl"] .rotate-180 { transform: rotate(180deg); }
[dir="rtl"] .rotate-270 { transform: rotate(90deg); }

/* === Positioning RTL === */
[dir="rtl"] .left-0 { left: auto; right: 0; }
[dir="rtl"] .left-1 { left: auto; right: 0.25rem; }
[dir="rtl"] .left-2 { left: auto; right: 0.5rem; }
[dir="rtl"] .left-3 { left: auto; right: 0.75rem; }
[dir="rtl"] .left-4 { left: auto; right: 1rem; }

[dir="rtl"] .right-0 { right: auto; left: 0; }
[dir="rtl"] .right-1 { right: auto; left: 0.25rem; }
[dir="rtl"] .right-2 { right: auto; left: 0.5rem; }
[dir="rtl"] .right-3 { right: auto; left: 0.75rem; }
[dir="rtl"] .right-4 { right: auto; left: 1rem; }

/* === Component-Specific RTL === */

/* Navigation RTL */
[dir="rtl"] .nav-item {
  margin-left: 0;
  margin-right: 1rem;
}

[dir="rtl"] .nav-item:last-child {
  margin-right: 0;
}

/* Button groups RTL */
[dir="rtl"] .btn-group .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  border-top-right-radius: 0.375rem;
  border-bottom-right-radius: 0.375rem;
}

[dir="rtl"] .btn-group .btn:last-child {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
  border-top-left-radius: 0.375rem;
  border-bottom-left-radius: 0.375rem;
}

/* Form elements RTL */
[dir="rtl"] .form-input {
  text-align: right;
}

[dir="rtl"] .form-input[type="number"] {
  text-align: left; /* Keep numbers LTR */
}

[dir="rtl"] .form-label {
  text-align: right;
}

/* Checkbox and radio RTL */
[dir="rtl"] .form-checkbox,
[dir="rtl"] .form-radio {
  margin-left: 0.5rem;
  margin-right: 0;
}

/* Select dropdown RTL */
[dir="rtl"] .form-select {
  background-position: left 0.5rem center;
  padding-left: 2.5rem;
  padding-right: 0.75rem;
}

/* === Icon RTL === */
[dir="rtl"] .icon-chevron-left::before {
  content: "›";
}

[dir="rtl"] .icon-chevron-right::before {
  content: "‹";
}

[dir="rtl"] .icon-arrow-left::before {
  content: "→";
}

[dir="rtl"] .icon-arrow-right::before {
  content: "←";
}

/* SVG icon mirroring */
[dir="rtl"] .icon-rtl-mirror {
  transform: scaleX(-1);
}

/* === Table RTL === */
[dir="rtl"] table {
  direction: rtl;
}

[dir="rtl"] th,
[dir="rtl"] td {
  text-align: right;
}

[dir="rtl"] th:first-child,
[dir="rtl"] td:first-child {
  border-radius: 0;
  border-top-right-radius: 0.375rem;
  border-bottom-right-radius: 0.375rem;
}

[dir="rtl"] th:last-child,
[dir="rtl"] td:last-child {
  border-radius: 0;
  border-top-left-radius: 0.375rem;
  border-bottom-left-radius: 0.375rem;
}

/* === Modal RTL === */
[dir="rtl"] .modal-content {
  text-align: right;
}

[dir="rtl"] .modal-header .close {
  margin-left: 0;
  margin-right: auto;
}

/* === Dropdown RTL === */
[dir="rtl"] .dropdown-menu {
  left: auto;
  right: 0;
  text-align: right;
}

[dir="rtl"] .dropdown-menu-right {
  left: 0;
  right: auto;
}

/* === Sidebar RTL === */
[dir="rtl"] .sidebar-left {
  left: auto;
  right: 0;
}

[dir="rtl"] .sidebar-right {
  right: auto;
  left: 0;
}

/* === Card RTL === */
[dir="rtl"] .card-img-left {
  order: 2;
}

[dir="rtl"] .card-body {
  order: 1;
}

/* === Alert RTL === */
[dir="rtl"] .alert-dismissible .close {
  left: 0;
  right: auto;
}

/* === Tooltip RTL === */
[dir="rtl"] .tooltip.bs-tooltip-left {
  margin-left: 0;
  margin-right: -0.4rem;
}

[dir="rtl"] .tooltip.bs-tooltip-right {
  margin-right: 0;
  margin-left: -0.4rem;
}

/* === Breadcrumb RTL === */
[dir="rtl"] .breadcrumb-item + .breadcrumb-item::before {
  content: "‹";
  margin-left: 0;
  margin-right: 0.5rem;
}

/* === QDesigner Specific RTL === */

/* Designer Canvas RTL */
[dir="rtl"] .designer-canvas {
  direction: ltr; /* Keep canvas LTR for consistent positioning */
}

[dir="rtl"] .designer-sidebar {
  text-align: right;
}

/* Question Components RTL */
[dir="rtl"] .question-header {
  text-align: right;
}

[dir="rtl"] .question-options {
  text-align: right;
}

[dir="rtl"] .question-option {
  flex-direction: row-reverse;
}

[dir="rtl"] .question-option input {
  margin-left: 0.5rem;
  margin-right: 0;
}

/* Scale Questions RTL */
[dir="rtl"] .scale-labels {
  flex-direction: row-reverse;
}

[dir="rtl"] .scale-left-label {
  order: 2;
}

[dir="rtl"] .scale-right-label {
  order: 1;
}

/* Matrix Questions RTL */
[dir="rtl"] .matrix-question table {
  direction: rtl;
}

[dir="rtl"] .matrix-question th:first-child {
  text-align: right;
  border-top-right-radius: 0.375rem;
  border-top-left-radius: 0;
}

/* Analytics Charts RTL */
[dir="rtl"] .chart-container {
  direction: ltr; /* Keep charts LTR for consistency */
}

[dir="rtl"] .chart-legend {
  text-align: right;
}

/* Language Switcher RTL */
[dir="rtl"] .language-switcher .dropdown-menu {
  left: auto;
  right: 0;
}

[dir="rtl"] .language-switcher button {
  flex-direction: row-reverse;
}

/* Translation Manager RTL */
[dir="rtl"] .translation-manager table {
  direction: rtl;
}

[dir="rtl"] .translation-manager th,
[dir="rtl"] .translation-manager td {
  text-align: right;
}

[dir="rtl"] .translation-manager .key-column {
  text-align: left; /* Keep translation keys LTR */
  font-family: monospace;
}

/* === Animation RTL === */
[dir="rtl"] .slide-in-left {
  animation: slide-in-right 0.3s ease-out;
}

[dir="rtl"] .slide-in-right {
  animation: slide-in-left 0.3s ease-out;
}

@keyframes slide-in-right {
  from { transform: translateX(100%); }
  to { transform: translateX(0); }
}

@keyframes slide-in-left {
  from { transform: translateX(-100%); }
  to { transform: translateX(0); }
}

/* Fade in RTL */
[dir="rtl"] .fade-in-left {
  animation: fade-in-right 0.5s ease-out;
}

[dir="rtl"] .fade-in-right {
  animation: fade-in-left 0.5s ease-out;
}

@keyframes fade-in-right {
  from { 
    opacity: 0;
    transform: translateX(20px);
  }
  to { 
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes fade-in-left {
  from { 
    opacity: 0;
    transform: translateX(-20px);
  }
  to { 
    opacity: 1;
    transform: translateX(0);
  }
}

/* === Responsive RTL === */
@media (max-width: 768px) {
  [dir="rtl"] .mobile-menu {
    left: auto;
    right: 0;
  }
  
  [dir="rtl"] .mobile-sidebar {
    transform: translateX(100%);
  }
  
  [dir="rtl"] .mobile-sidebar.open {
    transform: translateX(0);
  }
}

/* === Print RTL === */
@media print {
  [dir="rtl"] * {
    text-align: right !important;
  }
  
  [dir="rtl"] .no-print-rtl {
    display: none !important;
  }
}

/* === Utility Classes for RTL === */
.rtl-only {
  display: none;
}

[dir="rtl"] .rtl-only {
  display: block;
}

.ltr-only {
  display: block;
}

[dir="rtl"] .ltr-only {
  display: none;
}

/* Inline RTL utilities */
.inline-rtl-only {
  display: none;
}

[dir="rtl"] .inline-rtl-only {
  display: inline;
}

.inline-ltr-only {
  display: inline;
}

[dir="rtl"] .inline-ltr-only {
  display: none;
}

/* Force LTR for specific content */
.force-ltr {
  direction: ltr !important;
  text-align: left !important;
}

/* Force RTL for specific content */
.force-rtl {
  direction: rtl !important;
  text-align: right !important;
}

/* === Accessibility RTL === */
[dir="rtl"] .sr-only {
  text-align: right;
}

/* Focus styles RTL */
[dir="rtl"] .focus\:ring-offset-2:focus {
  --tw-ring-offset-width: 2px;
}

/* === Custom Properties for RTL === */
:root {
  --rtl-start: left;
  --rtl-end: right;
}

[dir="rtl"] {
  --rtl-start: right;
  --rtl-end: left;
}

/* Use with CSS custom properties */
.positioned-start {
  position: absolute;
  left: var(--rtl-start);
}

.positioned-end {
  position: absolute;
  right: var(--rtl-end);
}

/* === Logical Properties (Modern approach) === */
/* Use these when supported for better RTL handling */
.logical-margin-inline-start {
  margin-inline-start: 1rem;
}

.logical-margin-inline-end {
  margin-inline-end: 1rem;
}

.logical-padding-inline-start {
  padding-inline-start: 1rem;
}

.logical-padding-inline-end {
  padding-inline-end: 1rem;
}

.logical-border-inline-start {
  border-inline-start: 1px solid #e5e7eb;
}

.logical-border-inline-end {
  border-inline-end: 1px solid #e5e7eb;
}

/* === Performance Optimizations === */
/* Reduce paint and layout thrashing in RTL */
[dir="rtl"] .gpu-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* === Dark Mode RTL Support === */
@media (prefers-color-scheme: dark) {
  [dir="rtl"] .dark-mode-rtl {
    /* Dark mode specific RTL adjustments */
  }
}